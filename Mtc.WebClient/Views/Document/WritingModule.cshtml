@model Mtc.WebClient.Models.WriteContentViewModel
@{
    ViewBag.Title = "Писане";
}
<div class="panel panel-primary">
    <div class="panel-heading"><h3 class="panel-title">@Model.TaskTitle</h3></div>
    <div class="panel-body">
        @using (Html.BeginForm("WriteContent", "Document", FormMethod.Post, new { id = "createDocumentForm", @class = "form-horizontal" }))
        {
            <div class="form-group">
                <label for="subtitle" class="col-lg-2 label-panel control-label">Подсекция</label>
                <div class="col-lg-9">
                        @Html.EditorFor(model => model.Title, new { htmlAttributes = new { @class = "form-control", @placeholder = @Model.SectionTitle} })
                </div>
            </div>
            <div class="form-group">
                <label for="maintext" class="col-lg-2 label-panel control-label">Основен текст</label>
                <div class="col-lg-9">
                        @Html.EditorFor(model => model.MainText, new { htmlAttributes = new { rows = 20, @class = "form-control", @placeholder = @Model.MainText} })
                </div>
            </div>
            <div class="form-group">
                <div class="col-lg-11">
                    <button type="submit" class="btn btn-primary pull-right" id="save">   
                        @if (Model.IsDisabled)
                        {
                            <span class="glyphicon glyphicon-backward" aria-hidden="true"></span>
                            <span>Обратно към задачите</span>
                        }
                        else
                        {
                            <span class="glyphicon glyphicon-save" aria-hidden="true"></span>
                            <span>Запазване</span>
                        }
                    </button>
                </div>
            </div>

            @Html.HiddenFor(x => x.CurrentTaskId, new { id = "CurrentTaskId" })
            @Html.HiddenFor(x => x.CurrentSectionContentId, new { id = "CurrentSectionContentId" })
            @Html.HiddenFor(x => x.IsDisabled, new { id = "IsDisabled" })
            @Html.HiddenFor(x => x.DocumentId, new { id = "DocumentId" })
        }
    </div>
</div>
@section scripts{
    @Scripts.Render("~/bundles/common")

    <script>
        $(document).ready(function() {
            if (@Model.IsDisabled.ToString().ToLower() == true) {
                $('#MainText').attr('disabled', 'disabled');
                $('#Title').attr('disabled', 'disabled');
            };
        });
    </script>
}
